const data = require("./airlines-data.json");
const featuresLength = data.length;
const fs = require("fs");

// centroids from nominatim
const geometries = {
  BENGALURU: [77.5912997, 12.9791198],
  ABUDHABI: [55.3020601, 25.2747757],
  AHMEDABAD: [72.5797068, 23.0216238],
  CHENNAI: [80.2838331, 13.0801721],
  DELHI: [77.2219388, 28.6517178],
  HYDERABAD: [68.3750376, 25.3801017],
  KOCHI: [76.393365995862, 10.15438305],
  KOLKATA: [88.3476023, 22.5677459],
  KOZHIKODE: [75.7759372, 11.2446144],
  MANGALORE: [74.8430082, 12.8698101],
  MUMBAI: [72.8353355, 18.9387711],
  TRIVANDRUM: [76.9570481, 8.5058909],
  KANNUR: [75.3538772994719, 11.94668945],
  "ADDIS ABABA": [38.7612525, 9.0107934],
  "AL AIN": [55.7474052, 24.2258413],
  ALMATY: [76.9457275, 43.2363924],
  GOA: [74.0855134, 15.3004543],
  AMSTERDAM: [4.89797550561798, 52.3745403],
  ASHGABAT: [58.3822788, 37.9404379],
  BAHRAIN: [50.5344606, 26.1551249],
  BANGKOK: [100.493087, 13.7542529],
  JAIPUR: [75.820349, 26.916194],
  LUCKNOW: [80.9346001, 26.8381],
  VARANASI: [83.0076292, 25.3356491],
  BASRA: [47.8090981, 30.4952367],
  BIRMINGHAM: [-1.894053, 52.4775396],
  AMRITSAR: [74.8736788, 31.6343083],
  CAIRO: [31.243666, 30.048819],
  CHICAGO: [-87.6244212, 41.8755616],
  COLOGNE: [6.959974, 50.938361],
  CHITTAGONG: [91.8412863, 22.3307998],
  COLOMBO: [79.8655608840961, 6.9218124],
  COIMBATORE: [76.9628425, 11.0018115],
  MADURAI: [78.1140983, 9.9261153],
  TIRUCHIRAPALLY: [78.7127709869104, 10.76208595],
  COPENHAGEN: [12.5700724, 55.6867243],
  DAMMAM: [50.1039991, 26.4367824],
  DHAKA: [90.3788136, 23.7593572],
  DOHA: [51.5264162, 25.2856329],
  NAGPUR: [79.0820556, 21.1498134],
  "DON MUEANG": [100.603531423907, 13.9122207],
  BHUBANESWAR: [85.8394548, 20.2602939],
  VISAKHAPATNAM: [83.2900970900653, 17.7214822],
  DUBAI: [55.1887608818332, 25.0750095],
  PUNE: [73.8544541, 18.521428],
  FRANKFURT: [8.6820917, 50.1106444],
  GUANGZHOU: [113.2592945, 23.1301964],
  "HAA DHAALU ATOLL": [73.3287853, 4.7064352],
  HANOI: [105.8544441, 21.0294498],
  HELNSKI: [24.9425683, 60.1674086],
  "HONG KONG": [114.185797810004, 22.34921555],
  ISTANBUL: [28.9651646, 41.0096334],
  GUWAHATI: [91.753943, 26.1805978],
  JEDDAH: [39.1640396, 21.5822247],
  KABUL: [69.1776476, 34.5260131],
  KANDAHAR: [65.7144771, 31.6257718],
  KIGALI: [30.061507, -1.950851],
  KUALALUMPUR: [101.6943028, 3.1516636],
  KUNMING: [102.714338, 25.0437977],
  KUWAIT: [47.4979476, 29.2733964],
  LEIPZIG: [12.3747329, 51.3406321],
  LONDON: [-0.1276474, 51.5073219],
  LUXEMBOURG: [6.1296751, 49.8158683],
  MADRID: [-3.7035825, 40.4167047],
  MALE: [14.4476911, 35.8885993],
  MALPENSA: [8.0097505, 45.6552288],
  MANCHESTER: [-2.2451148, 53.4794892],
  MARUITIUS: [57.5703566, -20.2759451],
  MEDINA: [39.6111216, 24.471153],
  MELBOURNE: [144.9631608, -37.8142176],
  MOSCOW: [37.6174943, 55.7504461],
  MUENCHEN: [11.5753822, 48.1371079],
  MUSCAT: [58.5451305, 23.5997857],
  NAIROBI: [36.8172449, -1.2832533],
  NAJF: [44.3299926, 32.0010227],
  NARITA: [140.3183376, 35.7767683],
  "NEW YORK": [-74.0060152, 40.7127281],
  NEWARK: [-74.1723667, 40.735657],
  OSAKA: [135.490357, 34.6198813],
  PARIS: [2.3514992, 48.8566101],
  PEKING: [116.3912757, 39.906217],
  PARO: [89.3183409, 27.4646365],
  PHUKET: [98.3529292, 7.9366015],
  RANGOON: [96.1609916, 16.7967129],
  RASALKHAMA: [55.938232, 25.7737705],
  REUNION: [55.5364801129923, -21.13073795],
  RIYADH: [46.7150648, 24.6319692],
  ROME: [12.4853384, 41.894802],
  SALALAH: [54.0894341, 17.0209365],
  "SAN FRANCISCO": [-122.4192363, 37.7792808],
  SEOUL: [126.9782914, 37.5666791],
  SEYCHELLES: [55.7129575, -4.3265047],
  SHANGHAI: [121.4890497, 31.2252985],
  SHARJAH: [55.3895321, 25.3585432],
  SINGAPORE: [103.8520359, 1.2904753],
  NASIK: [73.8316941, 19.9615591],
  SURAT: [72.8081281, 21.1864607],
  STOCKHOLM: [18.0710935, 59.3251172],
  VIJAYAWADA: [80.6185102, 16.5087586],
  SYDNEY: [151.2164539, -33.8548157],
  TAIPAE: [121.5636796, 25.0375198],
  TASHKENT: [69.2787079, 41.3123363],
  TEHRAN: [51.4013785, 35.7006177],
  TOKYO: [139.7594549, 35.6828387],
  TELAVIV: [34.7848015, 32.0541496],
  TORONTO: [-79.387207, 43.653963],
  Vancouver: [-123.1139529, 49.2608724],
  VIENNA: [16.3725042, 48.2083537],
  "WASHINGTON, DC": [-77.0365529, 38.8948932],
  ZURICH: [8.5423328, 47.3723941]
};
let fc = {
  type: "FeatureCollection",
  features: []
};
let citiesFC = {
  type: "FeatureCollection",
  features: []
};

data.forEach((datum, datumIndex) => {
  let feature = {
    type: "Feature",
    properties: {},
    geometry: {
      type: "LineString",
      coordinates: []
    }
  };
  feature.properties = datum;
  fc.features.push(feature);
  feature.geometry.coordinates.push(geometries[datum["CITY 1"]]);
  feature.geometry.coordinates.push(geometries[datum["CITY 2"]]);

  if (datumIndex === featuresLength - 1) {
    fs.writeFileSync("airlines-arcs.geojson", JSON.stringify(fc));
  }
});

for (var property in geometries) {
  let feature = {
    type: "Feature",
    properties: {},
    geometry: {
      type: "Point",
      coordinates: undefined
    }
  };
  feature.geometry.coordinates = geometries[property];
  citiesFC.features.push(feature);
}

fs.writeFileSync("airlines-cities.geojson", JSON.stringify(citiesFC));
